1.针对阿里云的centos系统，只有数据盘才能够支持扩容。

2.在阿里云后台管理对数据盘进行扩容处理，例如从40G扩容到80G，只需要加到80G即可，扩容完成后，后台会显示数据盘为80G。

3.重启服务器。

4.使用xshell远程连接登录服务器，键入命令df -h 查看磁盘使用情况，如果没有类似**/dev/vdb? **或者**dev/xvdb?**的磁盘分区，则说明磁盘并未创建分区。如果有，则忽略5-12步骤。

5.键入命令fdisk -l，前面已经确定为数据盘扩容了，表示一定有数据盘，所以执行命令后将会发现**/dev/vdb? **或者**dev/xvdb?（?表示1-9的数字或者a-z的字母）**。

6.创建一个单分区数据盘，依次执行以下命令：

     i .运行`fdisk /dev/vdb 或（fdisk /dev/xvdb）`：对数据盘进行分区。

     ii.输入`n`并按回车键：创建一个新分区。

     iii. 输入`p`并按回车键：选择主分区。因为创建的是一个单分区数据盘，所以只需要创建主分区。

> **说明：**如果要创建 4 个以上的分区，您应该创建至少一个扩展分区，即选择`e`。

     iv. 输入分区编号并按回车键。因为这里仅创建一个分区，可以输入 1。

     v.输入第一个可用的扇区编号：按回车键采用默认值 1。

     vi .输入最后一个扇区编号：因为这里仅创建一个分区，所以按回车键采用默认值。   

     vii. 输入`wq`并按回车键，开始分区。

7.在新分区上创建一个文件系统：运行命令mkfs.ext3 /dev/vdb1 。

8.（建议）备份etc/fstab：运行命令cp /etc/fstab /etc/fstab.bak。

9.向 /etc/fstab 写入新分区信息：运行命令 echo /dev/vdb1 /mnt ext3 defaults 0 0 &gt;&gt; /etc/fstab。

10.查看 /etc/fstab 中的新分区信息：运行命令 cat /etc/fstab。

11.挂载文件系统：运行命令mount /dev/vdb1 /mnt。（mnt为系统根目录下的挂载点，可以自定义文件夹）。

12.查看目前磁盘空间和使用情况：运行命令`df -h`。如果出现新建文件系统的信息，说明挂载成功，可以使用新的文件系统了。挂载操作完成后，不需要重启实例即可开始使用新的文件系统。

13.看到有类似的分区，首先卸载分区运行 umount \[文件系统名称\] 命令卸载主分区，如：umount /dev/vdb1，df -h 查看是否卸载成功。

14.使用 fdisk 命令删除原来的分区并创建新分区：

       i. 运行命令`fdisk -l`罗列分区信息并记录扩容前数据盘的最终容量、起始扇区（First sector）位置。

      ii. 运行命令fdisk \[数据盘设备名\]进入fdisk界面。本示例中，命令为fdisk /dev/vdb。

     iii. 输入`d`并按回车键，删除原来的分区。

> **说明**：删除分区不会造成数据盘内数据的丢失。

     iv. 输入`n`并按回车键，开始创建新的分区。

     v. 输入`p`并按回车键，选择创建主分区。因为创建的是一个单分区数据盘，所以只需要创建主分区。

> **说明**：如果要创建 4 个以上的分区，您应该创建至少一个扩展分区，即选择`e`。

```
 vi. 输入分区编号并按回车键。因为这里仅创建一个分区，所以输入 1。

 vii. 输入第一个可用的扇区编号：为了保证数据的一致性，First sector 需要与原来的分区保持一致。在本示例中，按回车键采用默认值。
```

> **说明**：如果发现 First sector 显示的位置和之前记录的不一致，说明之前可能使用`parted`来分区，那么就停止当前的`fdisk`操作，使用[`parted`](https://help.aliyun.com/document_detail/25452.html?spm=a2c4g.11186623.6.668.EZt6T6#parted)重新操作。

     viii. 输入最后一个扇区编号：因为这里仅创建一个分区，所以按回车键采用默认值。

     ix. 输入`wq`并按回车键，开始分区。

15.（可选）部分操作系统里，修改分区后可能会重新自动挂载文件系统。建议先执行 df -h 重新查看文件系统空间和使用情况。如果文件系统重新被挂载，执行 umount \[文件系统名称\] 再次卸载文件系统。

16.检查文件系统，并变更文件系统大小。

```
  1&gt;  e2fsck -f /dev/vdb1    \# 检查文件系统

  2&gt;  resize2fs /dev/vdb1   \# 变更文件系统大小

 说明：

 使用 e2fsck 时，由于系统需要检查并订正文件系统元数据，所以速度较慢、耗时较长，请耐心等待。

 正确使用 e2fsck 和 resize2fs 指令，不会造成原有数据丢失。
```

17.将扩容完成的文件系统挂载到原来的挂载点（如本示例中的 /mnt）。键入命令mount /dev/vdb1 /mnt

18.查看文件系统空间和使用情况：运行命令`df -h`。如果出现扩容后的文件系统信息，说明挂载成功，可以使用扩容后的文件系统了。

> **说明**：挂载操作完成后，不需要在控制台上重启实例即可开始使用扩容后的文件系统。

19.从13-18步骤操作不会对之前数据盘中的数据造成影响，但是需谨慎操作，操作前建议先创建快照。

```

```



